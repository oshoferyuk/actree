// <copyright company="Softerra">
//    Copyright (c) Softerra, Ltd. All rights reserved.
// </copyright>
//
// <summary>
//    Contains styles for editor container.
// </summary>

@import './editor-container.component.pre';
@import '../../../../node_modules/@angular/material/_theming';
@import '../../../../src/material/_variables';
@import '../../../_typography.scss';
@import './editor-container.component.scss.theme';

// :host-context( .zzz ) {
::ng-deep {

  %editor-container-lg-margin-bottom {
    margin-bottom: 25px;
  }

  .editor-container {
    display: flex;
    min-width: 1px;

    .editor-container__editor {
      width: 100%;
    }
    // Set editor label font size for all edit container layouts.
    & > label {
      @extend .u-size-sm;
      display: block;
      word-wrap: break-word;
      -webkit-font-smoothing: antialiased;
    }

    textarea,
    input[type="text"],
    input[type="password"],
    input[type="datetime"],
    input[type="datetime-local"],
    input[type="date"],
    input[type="month"],
    input[type="time"],
    input[type="week"],
    input[type="number"],
    input[type="email"],
    input[type="url"],
    input[type="search"],
    input[type="tel"],
    input[type="color"] {
      /* remove default appearance from all input/textarea */
      -moz-appearance: none;
      -webkit-appearance: none;
    }

    ng-messages, [ng-messages] {
      font-size: 9pt; // $font-size-sm;
      word-wrap: break-word;
      overflow: hidden;
      min-height: $input-error-height;

      &.ng-enter {
        // Upon entering the DOM, messages should be hidden
        ng-message, [ng-message] {
          opacity: 0;
          margin-top: -100px;
        }
      }

      &.invalid-messages__long-error {
        min-height: $invalid-messages-long-error-height;

        ng-message, [ng-message] {
          padding-top: 0px;
        }
      }

      ng-message, [ng-message] {
        line-height: $input-error-line-height;
        overflow: hidden;
        transition: $swift-ease-in;
        // Default state for messages is to be visible
        opacity: 1;
        margin-top: 0;
        // Add some top padding which is equal to half the difference between the expected height
        // and the actual height
        padding-top: $error-padding-top;
      }
    }

    .adm-input-message-animation {
      &.ng-enter, &:not(.ng-animate) {
        opacity: 0;
        margin-top: -100px;
      }
    }
    // Hide messages for untouched editor.
    .ng-untouched + *, .ng-untouched + {
      [ng-messages], ng-message {
        // Prevent changing messages height before showing.
        max-height: $input-error-height;
        opacity: 0;
      }
    }

  }

  @include editor-container-layout('.editor-container--floated') {
    flex-direction: column;
    width: 100%;

    & > label {
      transform: translate3d(0, $input-label-default-offset, 0) scale($input-label-default-scale);
      transition: transform $swift-ease-out-timing-function 0.25s;
      transform-origin: left top;
      color: $form-element-placeholder-color;
    }

    .editor-container__content {
      z-index: 1;
    }

    &.is-focused > label, &.is-has-value > label {
      transform: translate3d(0, $input-label-float-offset, 0) scale($input-label-float-scale);
    }
    // If we have an existing value; don't animate the transform as it happens on page load and
    // causes erratic/unnecessary animation
    &.is-has-value > label {
      transition: none;
    }
  }

  @include editor-container-layout('.editor-container--column') {
    flex-direction: column;

    .editor-container__content {
      flex-grow: 1;
      display: flex;
      flex-direction: column;
    }
  }

  @include editor-container-layout('.editor-container--row') {
    flex-direction: row;

    .editor-container__content {
      flex-grow: 1;
      overflow: hidden;
    }

    & > label {
      padding-right: 20px;
      padding-top: 1px; // offset for align label across to editor.
    }
  }

  .editor-container--label-bold {
    > .editor-container__label {
      font-weight: 500;
    }
  }

  .editor-container--messages-min-height {
    &:not(.is-invalid) {
      ng-messages, [ng-messages] {
        max-height: 0;
      }
    }

    ng-messages, [ng-messages] {
      min-height: 0;
    }
  }

  .editor-container--long-messages {
    .editor-container__content {
      overflow: visible;
    }

    ng-messages, [ng-messages] {
      width: 200px;
      ng-message, [ng-message] {
        padding-bottom: $error-padding-top - 1;
      }
    }
  }

}
